language: python
python:
- "3.8"
env:
- DJANGO=2.0 DB=sqlite3

global:
  - PGPORT=5432

install:
- pip install -r requirements.txt
- pip install codacy-coverage

script:
- coverage run --branch --source=. manage.py test --keepdb
- coverage xml
- python-codacy-coverage -r coverage.xml

branches:
   only:
     - main


